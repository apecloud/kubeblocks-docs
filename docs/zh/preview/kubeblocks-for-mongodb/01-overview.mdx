---
description: 了解KubeBlocks MongoDB插件的功能特性，包括部署拓扑结构、生命周期管理、备份恢复机制以及支持的版本信息。
keywords:
- MongoDB
- KubeBlocks
- database
- features
- lifecycle management
- backup
- restore
sidebar_label: 概述
sidebar_position: 1
title: KubeBlocks MongoDB 插件概述
---
# KubeBlocks MongoDB 插件概述

MongoDB 是一种 NoSQL 文档数据库，专为灵活性、可扩展性和高性能而设计。与传统关系型数据库（SQL）不同，MongoDB 以类 JSON 文档（BSON 格式）存储数据，非常适合处理非结构化或半结构化数据。

### 支持的拓扑结构

**副本集（replicaset）**

MongoDB 副本集是一组维护相同数据集的 MongoDB 服务器，提供高可用性和数据冗余。副本集是 MongoDB 容错和数据可靠性的基础。通过在多个节点间复制数据，MongoDB 确保当一台服务器发生故障时，另一台可以无缝接管，而不会影响应用程序的可用性。

在副本集中，通常有三种类型的节点：

- **主节点（Primary Node）**：处理所有写操作，默认情况下也处理读请求
- **从节点（Secondary Nodes）**：维护主节点数据的副本，可选择性地处理读请求
- **仲裁节点（Arbiter Node）**：参与选举但不存储数据，用于保持副本集中投票成员数量为奇数

建议创建至少包含**三个**节点的集群以确保高可用性：一个主节点和两个从节点。

### 生命周期管理

KubeBlocks 通过全面的生命周期管理简化 MongoDB 操作：

| 功能                      | 描述                                                                 |
|------------------------------|-----------------------------------------------------------------------------|
| **水平扩展**       | 增减副本数量以调整容量                                   |
| **垂直扩展**         | 调整 MongoDB 实例的 CPU/内存资源                       |
| **存储卷扩容**         | 动态增加存储容量而无需停机                     |
| **重启操作**       | 以最小影响进行受控集群重启                        |
| **启动/停止**               | 临时暂停/恢复集群操作                              |
| **密码管理**      | 可在创建时为 MongoDB 集群设置和管理自定义 root 密码 |
| **自定义服务**          | 暴露专门的数据库端点                                      |
| **主从切换**               | 计划内的主从角色变更                                       |
| **副本管理**       | 安全地停用或重建特定副本                          |
| **版本升级**         | 无缝执行次版本升级                                  |
| **高级调度**      | 自定义 Pod 放置和资源分配                           |
| **监控**               | 集成 Prometheus 指标收集                                  |
| **日志**                  | 通过 Loki Stack 实现集中式日志记录                                           |

### 备份与恢复

KubeBlocks 支持多种 MongoDB 备份策略：

| 功能           | 方法          | 描述 |
|-------------|--------|------------|
| 全量备份 | dump   | 使用 MongoDB 工具 `mongodump` 创建数据库内容的二进制导出  |
| 全量备份 | datafile | 备份数据库的数据文件 |
| 持续备份 | archive-oplog | 使用 `wal-g` 持续归档 MongoDB oplog |

### 支持的版本

KubeBlocks MongoDB 插件支持以下 MongoDB 版本：

| 主版本 | 支持的次版本       |
|---------------|--------------------------------|
| 4.0 | 4.0.28,4.2.24,4.4.29 |
| 5.0 | 5.0.28 |
| 6.0 | 6.0.22,6.0.20,6.0.16 |
| 7.0 | 7.0.19,7.0.16,7.0.12 |
| 8.0 | 8.0.8,8.0.6,8.0.4|

可通过以下命令查看支持的版本列表：
```bash
kubectl get cmpv mongodb
```