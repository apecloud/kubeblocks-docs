---
title: Stop/Start/Restart
sidebar_position: 1
sidebar_label: Stop/Start/Restart
---

# Stop, Start, and Restart Operations

This guide covers how to stop, start, and restart your ClickHouse cluster.

## Stop a Cluster

Stopping a cluster gracefully shuts down all pods while preserving data:

```bash
kubectl patch cluster ch-cluster -n default --type merge --patch '{"spec": {"componentSpecs": [{"name": "clickhouse", "stop": true}, {"name": "clickhouse-keeper", "stop": true}]}}'
```

Verify the cluster is stopped:

```bash
kubectl get cluster ch-cluster -n default
# STATUS should show "Stopped"
```

## Start a Cluster

To start a stopped cluster:

```bash
kubectl patch cluster ch-cluster -n default --type merge --patch '{"spec": {"componentSpecs": [{"name": "clickhouse", "stop": false}, {"name": "clickhouse-keeper", "stop": false}]}}'
```

## Restart a Cluster

### Restart All Components

```bash
kubectl annotate cluster ch-cluster -n default kubeblocks.io/restart-component="clickhouse,clickhouse-keeper" --overwrite
```

### Restart Specific Component

Restart only ClickHouse nodes:

```bash
kubectl annotate cluster ch-cluster -n default kubeblocks.io/restart-component="clickhouse" --overwrite
```

Restart only Keeper nodes:

```bash
kubectl annotate cluster ch-cluster -n default kubeblocks.io/restart-component="clickhouse-keeper" --overwrite
```

### Rolling Restart

For zero-downtime restart:

```bash
kubectl rollout restart statefulset ch-cluster-clickhouse-shard-0 -n default
kubectl rollout restart statefulset ch-cluster-clickhouse-shard-1 -n default
# Continue for all shards...
```

## Monitor Restart Progress

```bash
# Watch pod status
kubectl get pods -l app.kubernetes.io/instance=ch-cluster -n default -w

# Check rollout status
kubectl rollout status statefulset ch-cluster-clickhouse-shard-0 -n default
```